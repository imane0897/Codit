<!DOCTYPE html>
<html>

<head>
    <!-- Standard Meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

    <!-- Site Properties -->
    <title>Edit Problem</title>
    <link rel="stylesheet" type="text/css" href="semantic/dist/components/reset.css">
    <link rel="stylesheet" type="text/css" href="semantic/dist/components/site.css">
    <link rel="stylesheet" type="text/css" href="semantic/dist/components/container.css">
    <link rel="stylesheet" type="text/css" href="semantic/dist/components/grid.css">
    <link rel="stylesheet" type="text/css" href="semantic/dist/components/header.css">
    <link rel="stylesheet" type="text/css" href="semantic/dist/components/image.css">
    <link rel="stylesheet" type="text/css" href="semantic/dist/components/menu.css">
    <link rel="stylesheet" type="text/css" href="semantic/dist/components/segment.css">
    <link rel="stylesheet" type="text/css" href="semantic/dist/components/button.css">
    <link rel="stylesheet" type="text/css" href="semantic/dist/components/transition.css">
    <link rel="stylesheet" type="text/css" href="semantic/dist/components/tab.css">
    <link rel="stylesheet" type="text/css" href="semantic/dist/components/input.css">
    <link rel="stylesheet" type="text/css" href="semantic/dist/components/icon.css">
    <link rel="stylesheet" type="text/css" href="semantic/dist/components/dropdown.css">
    <link rel="stylesheet" type="text/css" href="semantic/dist/components/table.css">
    <link rel="stylesheet" type="text/css" href="semantic/dist/components/form.css">
    <link rel="stylesheet" type="text/css" href="semantic/dist/components/message.css">

    <link rel="stylesheet" type="text/css" href="assets/library/pages.css">
</head>

<body>
    <!-- Page Contents -->
    <div class="ui inverted segment">
        <div class="ui inverted menu">
            <div class="coditheader">Co
                <span class="d">d</span>it</div>
            <a class="item" href="catalogue">Problems</a>
            <a class="item">Status</a>
            <a class="item">Contest</a>
            <a class="item">Discuss</a>
        </div>
    </div>

    <div class="ui container">
        <div class="instruction">
            <h3>Instructions</h3>
            <p>Add a new question or edit an existing one. Notice that the content should be in
                <b>HTML format</b>, otherwise it may not display properly.</p>
        </div>
    </div>

    <div class="ui container">
        <div class="ui grid">
            <div class="five wide column">
                <a class="ui fluid primary basic button">Add a New Problem</a>
                <a class="ui fluid secondary basic button">Edit an Existing Problem</a>
            </div>
            <div class="eleven wide column">
                <form class="ui form" method="post" action="/editproblem">
                    <div class="three fields">
                        <div class="field">
                            <label>Problem ID</label>
                            <div class="ui fluid search selection dropdown">
                                <input id="pid" name="pid" type="hidden">
                                <i class="dropdown icon"></i>
                                <div class="default text">Select Problem ID</div>
                                <div class="menu">
                                    <div class="item" data-value="1000">1000</div>
                                    <div class="item" data-value="1001">1001</div>
                                    <div class="item" data-value="1002">1002</div>
                                    <div class="item" data-value="1003">1003</div>
                                    <div class="item" data-value="1004">1004</div>
                                </div>
                            </div>
                        </div>
                        <div class="field">
                            <label>Title</label>
                            <div class="ui fluid input">
                                <input id="title" name="title" placeholder="Problem title" type="text">
                            </div>
                        </div>
                        <div class="field">
                            <label>Level</label>
                            <select id="level" name="level" class="ui dropdown">
                                <option value="">Level</option>
                                <option value="0">0</option>
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5</option>
                            </select>
                        </div>
                    </div>
                    <div class="field">
                        <label>Description</label>
                        <textarea id="description" rows="5" name="description" placeholder="Enter question description here"></textarea>
                    </div>
                    <div class="field">
                        <label>Input</label>
                        <textarea id="input" rows="5" name="input" placeholder="Enter input description here"></textarea>
                    </div>
                    <div class="field">
                        <label>Output</label>
                        <textarea id="output" rows="5" name="output" placeholder="Enter output description here"></textarea>
                    </div>
                    <div class="field">
                        <label>Sample Input</label>
                        <textarea id="sampleinput" rows="5" name="sampleinput" placeholder="Enter sample input here"></textarea>
                    </div>
                    <div class="field">
                        <label>Sample Output</label>
                        <textarea id="sampleoutput" rows="5" name="sampleoutput" placeholder="Enter sample output here"></textarea>
                    </div>
                    <div class="ui error message"></div>
                    <input type="submit" value="Submit" class="ui black button" />
                </form>
            </div>
        </div>
    </div>

    <!-- footer -->
    <div class="ui inverted vertical footer">
        <div class="ui container">
            <hr class="style-two">
            <br>
            <div class="ui stackable inverted divided equal height stackable grid">
                <div class="three wide column text-center">
                    <p>Copyright &copy; 2018&ensp; Codit</p>
                </div>
                <div class="four wide column">
                </div>
                <div class="two wide column text-center">
                    <p>Contact&nbsp; Us</p>
                </div>
                <div class="four wide column text-center">
                    <p>Frequently&nbsp; Asked&nbsp; Questions</p>
                </div>
                <div class="three wide column text-center">
                    <p>Terms&nbsp; of&nbsp; Service</p>
                </div>
            </div>
        </div>
        <br>
    </div>
</body>

<script src="assets/library/jquery.min.js"></script>
<script src="semantic/dist/semantic.min.js"></script>
<script src="semantic/dist/components/form.js"></script>
<script src="semantic/dist/components/dropdown.js"></script>
<script>
    $(document)
        .ready(function () {
            $('.ui.dropdown')
                .dropdown();

            $('.ui.fluid.search.selection.dropdown')
                .dropdown({
                    onChange: function (val) {
                        req = new XMLHttpRequest();
                        if (req == null) {
                            alert('Uable to create request');
                            return;
                        }
                        var url = '/editproblem?pid=' + escape(val);
                        req.open('GET', url, true);
                        req.onreadystatechange = function () {
                            if (req.readyState == 4) {
                                console.log(req.status);
                                if (req.status == 200) {
                                    var problemInfo = parse('(' + req.responseText + ')');
                                    document.getElementById('title').value = problemInfo.Title;
                                    $('.ui.dropdown').has('#level').dropdown('set selected',
                                        problemInfo.Level.toString());
                                    document.getElementById('description').value = problemInfo.Description;
                                    document.getElementById('input').value = problemInfo.Input;
                                    document.getElementById('output').value = problemInfo.Output;
                                    document.getElementById('sampleinput').value = problemInfo.SampleInput;
                                    document.getElementById('sampleoutput').value = problemInfo.SampleOutput;
                                }
                            }
                        }
                        req.send(null);
                    }
                });

            $('.ui.form')
                .form({
                    fields: {
                        title: {
                            identifier: 'title',
                            rules: [{
                                type: 'empty',
                                prompt: 'Please enter question title'
                            }]
                        },
                        level: {
                            identifier: 'level',
                            rules: [{
                                type: 'empty',
                                prompt: 'Please select a level for the question'
                            }]
                        },
                        description: {
                            identifier: 'description',
                            rules: [{
                                type: 'empty',
                                prompt: 'Please enter question description'
                            }]
                        },
                        input: {
                            identifier: 'input',
                            rules: [{
                                type: 'empty',
                                prompt: 'Please enter question input description'
                            }]
                        },
                        output: {
                            identifier: 'output',
                            rules: [{
                                type: 'empty',
                                prompt: 'Please enter question output description'
                            }]
                        },
                        sampleinput: {
                            identifier: 'sampleinput',
                            rules: [{
                                type: 'empty',
                                prompt: 'Please enter question sample input'
                            }]
                        },
                        sampleoutput: {
                            identifier: 'sampleoutput',
                            rules: [{
                                type: 'empty',
                                prompt: 'Please enter question sample output'
                            }]
                        }
                    }
                });
        });
</script>

</html>